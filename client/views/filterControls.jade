template(name="filterControls")
  +autoForm(
    collection=filterCollection
    doc=filter
    type="update"
    id="filter-panel"
    template="filter"
  )
    +afQuickFields(
      id-prefix=idPrefix
      template="filter"
      minCount=1
    )
    .form-group
      .row.filter
        .filter-buttons
          button.run-filter.btn.btn-primary.btn-block(type="submit") Filter
          button.clear.btn.btn-default.btn-block Clear

template(name="afArrayField_filter")
  .filter-wrap
    if afFieldIsInvalid name=this.atts.name
      .autoform-array-field-error
        +afFieldMessage name=this.atts.name
    ul.list-unstyled
      +afEachArrayItem name=this.atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
        li.autoform-array-item
          +afQuickField name=this.name label=false
          if afArrayFieldHasMoreThanMinimum name=../atts.name minCount=../atts.minCount maxCount=../atts.maxCount
            a(type="button" class="autoform-remove-item") 
              span.glyphicon.glyphicon-remove-circle
    if afArrayFieldHasLessThanMaximum name=this.atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount
      a.autoform-add-item(type="button" data-autoform-field="{{this.atts.name}}" data-autoform-minCount="{{this.atts.minCount}}" data-autoform-maxCount="{{this.atts.maxCount}}")
        span.glyphicon.glyphicon-plus