template(name="importForm")

  +autoForm collection="collections.Studies" type="insert" id="importForm"

    .form-group.csv-file
      .panel.panel-default
        .panel-heading
          h3.panel-title CSV file upload
        .panel-body
          if importReports.count
            b File: &nbsp;
            tt #{csvFileName}
            | &nbsp;
            b Id: &nbsp;
            tt #{csvFileId}
          +afQuickField name='csvFile' id='csvFile'

          if importReports.count
            +reactiveTable collection=importReports fields=importFields

            if unmatchedHeadersString
              h4 Unused fields in your data
              tt #{unmatchedHeadersString}

    p Please fill out any of the following fields that apply to all reports in this study.

    +afQuickField name='contact' id='contact'

    +afQuickField name='populationType' id='populationType'

    +afQuickField name='screeningReason' id='screeningReason'

    +afQuickField name='vertebrateClasses' id='vertebrateClasses'

    +afQuickField name='speciesGenus' id='speciesGenus'

    +afQuickField name='speciesName' id='speciesName'

    +afQuickField name='speciesAffectedType' id='speciesAffectedType'

    +afQuickField name='speciesNotes' id='speciesNotes'

    +afQuickField name='ageClasses' id='ageClasses'

    +afQuickField name='ranavirusConfirmMethods' id='ranavirusConfirmMethods'

    if afFieldValueContains name='ranavirusConfirmMethods' value='other'
      +afQuickField name='specifyOtherRanavirusConfirmationMethods'

    +afQuickField name='sampleType' id='sampleType'

    if afFieldValueContains name='sampleType' value='other'
      +afQuickField name='specifyOtherRanavirusSampleTypes'

    +afQuickField name='dataUsePermissions' id='dataUsePermissions'

    +afQuickField name='consent' id='consent'

    +afQuickField name='additionalNotes' id='additionalNotes'

    +afQuickField name='publicationInfo' id='publicationInfo'

    .form-group
      button(type='submit' class='btn btn-primary') Submit
